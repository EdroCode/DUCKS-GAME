<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Tarefa3</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption empty">&nbsp;</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr></table><p class="caption">Tarefa3</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Tipos Auxiliares</a></li><li><a href="#g:2">Fun&#231;&#227;o Principal</a></li><li><a href="#g:3">Fun&#231;&#245;es Auxiliares</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>M&#243;dulo para a realiza&#231;&#227;o da Tarefa 3 de LI1/LP1 em 2025/26.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:Dano">Dano</a> = Int</li><li class="src short"><span class="keyword">type</span> <a href="#t:Danos">Danos</a> = [(<a href="Tarefa0_geral.html#t:Posicao" title="Tarefa0_geral">Posicao</a>, <a href="Tarefa3.html#t:Dano" title="Tarefa3">Dano</a>)]</li><li class="src short"><a href="#v:avancaEstado">avancaEstado</a> :: <a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a> -&gt; <a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a></li><li class="src short"><a href="#v:avancaMinhoca">avancaMinhoca</a> :: <a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a> -&gt; <a href="Labs2025.html#t:NumMinhoca" title="Labs2025">NumMinhoca</a> -&gt; <a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a> -&gt; <a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></li><li class="src short"><a href="#v:avancaObjeto">avancaObjeto</a> :: <a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a> -&gt; <a href="Labs2025.html#t:NumObjeto" title="Labs2025">NumObjeto</a> -&gt; <a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a> -&gt; Either <a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a> <a href="Tarefa3.html#t:Danos" title="Tarefa3">Danos</a></li><li class="src short"><a href="#v:calculaExplosao">calculaExplosao</a> :: <a href="Tarefa0_geral.html#t:Posicao" title="Tarefa0_geral">Posicao</a> -&gt; Int -&gt; <a href="Tarefa3.html#t:Danos" title="Tarefa3">Danos</a></li><li class="src short"><a href="#v:aplicaDanos">aplicaDanos</a> :: <a href="Tarefa3.html#t:Danos" title="Tarefa3">Danos</a> -&gt; <a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a> -&gt; <a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Tipos Auxiliares</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Dano" class="def">Dano</a> = Int <a href="#t:Dano" class="selflink">#</a></p></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Danos" class="def">Danos</a> = [(<a href="Tarefa0_geral.html#t:Posicao" title="Tarefa0_geral">Posicao</a>, <a href="Tarefa3.html#t:Dano" title="Tarefa3">Dano</a>)] <a href="#t:Danos" class="selflink">#</a></p></div><a href="#g:2" id="g:2"><h1>Fun&#231;&#227;o Principal</h1></a><div class="top"><p class="src"><a id="v:avancaEstado" class="def">avancaEstado</a> :: <a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a> -&gt; <a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a> <a href="#v:avancaEstado" class="selflink">#</a></p><div class="doc"><p>Avan&#231;a o <code><a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a></code> do jogo em um tick(<code><a href="Labs2025.html#t:Ticks" title="Labs2025">Ticks</a></code>).</p><p>Funcionamento:</p><ul><li>Atualiza os componentes de cada <code><a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></code></li><li>Atualiza os componentes de cada <code><a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a></code></li><li>Cria um novo <code><a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a></code> contendo as minhocas e os objetos atualizados de acordo com o dano recebido</li></ul></div></div><a href="#g:3" id="g:3"><h1>Fun&#231;&#245;es Auxiliares</h1></a><div class="top"><p class="src"><a id="v:avancaMinhoca" class="def">avancaMinhoca</a> :: <a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a> -&gt; <a href="Labs2025.html#t:NumMinhoca" title="Labs2025">NumMinhoca</a> -&gt; <a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a> -&gt; <a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a> <a href="#v:avancaMinhoca" class="selflink">#</a></p><div class="doc"><p>Para um dado <code><a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a></code>, dado o &#237;ndice(<code><a href="Labs2025.html#t:NumMinhoca" title="Labs2025">NumMinhoca</a></code>) de uma <code><a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></code> na lista de minhocas e o <code><a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a></code> dessa minhoca, retorna o novo <code><a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a></code> da <code><a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></code> no pr&#243;ximo tick(<code><a href="Labs2025.html#t:Ticks" title="Labs2025">Ticks</a></code>).</p><p>Funcionamento:</p><ul><li>Verifica se a <code><a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></code> tem posi&#231;&#227;o</li><li>Verifica a <code>Vida</code> da <code><a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></code></li><li>Calcula a nova posi&#231;&#227;o da <code><a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></code> (cair ou mover)</li><li>Verifica o <code><a href="Labs2025.html#t:Terreno" title="Labs2025">Terreno</a></code> na nova <code><a href="Tarefa0_geral.html#t:Posicao" title="Tarefa0_geral">Posicao</a></code> e atualiza a <code><a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></code> conforme o novo <code><a href="Labs2025.html#t:Terreno" title="Labs2025">Terreno</a></code></li></ul></div></div><div class="top"><p class="src"><a id="v:avancaObjeto" class="def">avancaObjeto</a> :: <a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a> -&gt; <a href="Labs2025.html#t:NumObjeto" title="Labs2025">NumObjeto</a> -&gt; <a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a> -&gt; Either <a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a> <a href="Tarefa3.html#t:Danos" title="Tarefa3">Danos</a> <a href="#v:avancaObjeto" class="selflink">#</a></p><div class="doc"><p>Para um dado <code><a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a></code>, dado o &#237;ndice(<code><a href="Labs2025.html#t:NumObjeto" title="Labs2025">NumObjeto</a></code>) de um <code><a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a></code> na lista de objetos e o estado desse objeto, retorna o novo estado do objeto no pr&#243;ximo tick ou, caso o objeto exploda, uma lista de posi&#231;&#245;es afetadas com o dano associado. Cada <code><a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a></code> possui um comportamento diferente</p><p>Funcinamento Geral:</p><ul><li>Recebe o <code><a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a></code>, o &#237;ndice do <code><a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a></code> e o <code><a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a></code> atual</li><li>Para cada tipo de <code><a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a></code>, aplica a l&#243;gica espec&#237;fica:</li></ul><h2 class="subheading details-toggle-control details-toggle" data-details-id="ch:avancaObjeto0"><code><a href="Labs2025.html#v:Barril" title="Labs2025">Barril</a></code>:</h2><details id="ch:avancaObjeto0"><summary class="hide-when-js-enabled">Expand</summary><ul><li>Se o <code><a href="Labs2025.html#v:Barril" title="Labs2025">Barril</a></code> n&#227;o est&#225; a explodir:</li><li>Verifica se est&#225; no solo ou em &#225;gua</li><li>Se n&#227;o estiver, marca o <code><a href="Labs2025.html#v:Barril" title="Labs2025">Barril</a></code> para explodir</li><li>Caso contr&#225;rio, mant&#233;m o <code><a href="Labs2025.html#v:Barril" title="Labs2025">Barril</a></code> inalterado</li></ul></details><h2 class="subheading details-toggle-control details-toggle" data-details-id="ch:avancaObjeto1"><code><a href="Labs2025.html#v:Bazuca" title="Labs2025">Bazuca</a></code>:</h2><details id="ch:avancaObjeto1"><summary class="hide-when-js-enabled">Expand</summary><ul><li>Move o <code><a href="Labs2025.html#v:Disparo" title="Labs2025">Disparo</a></code> na dire&#231;&#227;o especificada</li><li>Verifica se a nova posi&#231;&#227;o &#233; v&#225;lida e livre</li><li>Se for, atualiza a posi&#231;&#227;o do <code><a href="Labs2025.html#v:Disparo" title="Labs2025">Disparo</a></code></li><li>Caso contr&#225;rio, calcula a explos&#227;o na posi&#231;&#227;o atual</li></ul></details><h2 class="subheading details-toggle-control details-toggle" data-details-id="ch:avancaObjeto2"><code><a href="Labs2025.html#v:Mina" title="Labs2025">Mina</a></code>:</h2><details id="ch:avancaObjeto2"><summary class="hide-when-js-enabled">Expand</summary><ul><li>Verifica o tempo restante da <code><a href="Labs2025.html#v:Mina" title="Labs2025">Mina</a></code></li><li>Se acabar o tempo, calcula a explos&#227;o na posi&#231;&#227;o atual</li><li>Se o tempo for maior que 0:</li></ul><pre> -Verifica se est&#225; no solo ou em &#225;gua
   -Se n&#227;o estiver, move a mina para baixo e ajusta a dire&#231;&#227;o
   -Caso contr&#225;rio, mant&#233;m a mina na posi&#231;&#227;o atual
 </pre><ul><li>Se o tempo for <code>Nothing</code>:</li></ul><pre> -Verifica se h&#225; outras minhocas no raio de explos&#227;o (exceto o dono)
   -Se n&#227;o houver, mant&#233;m a mina inalterada
   -Caso contr&#225;rio, inicia o temporizador da mina
 </pre></details><h2 class="subheading details-toggle-control details-toggle" data-details-id="ch:avancaObjeto3"><code><a href="Labs2025.html#v:Dinamite" title="Labs2025">Dinamite</a></code>:</h2><details id="ch:avancaObjeto3"><summary class="hide-when-js-enabled">Expand</summary><ul><li>Verifica o tempo restante da <code><a href="Labs2025.html#v:Dinamite" title="Labs2025">Dinamite</a></code></li><li>Se acabar o tempo, calcula a explos&#227;o na posi&#231;&#227;o atual</li><li>Se o tempo for maior que 0:</li></ul><pre> -Verifica se est&#225; no solo
   -Se n&#227;o estiver, move a dinamite para baixo ou roda a posi&#231;&#227;o dependendo da dire&#231;&#227;o
   -Caso contr&#225;rio, mant&#233;m a dinamite na posi&#231;&#227;o atual
 </pre></details></div></div><div class="top"><p class="src"><a id="v:calculaExplosao" class="def">calculaExplosao</a> :: <a href="Tarefa0_geral.html#t:Posicao" title="Tarefa0_geral">Posicao</a> -&gt; Int -&gt; <a href="Tarefa3.html#t:Danos" title="Tarefa3">Danos</a> <a href="#v:calculaExplosao" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:aplicaDanos" class="def">aplicaDanos</a> :: <a href="Tarefa3.html#t:Danos" title="Tarefa3">Danos</a> -&gt; <a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a> -&gt; <a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a> <a href="#v:aplicaDanos" class="selflink">#</a></p><div class="doc"><p>Para uma lista de posi&#231;&#245;es afetadas por uma explos&#227;o, recebe um estado e calcula o novo estado em que esses danos s&#227;o aplicados.</p><p>Funcionamento Geral:</p><ul><li>Atualiza os componentes de cada <code><a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></code></li><li>Atualiza os componentes de cada <code><a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a></code></li><li>Cria um novo <code><a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a></code> contendo as minhocas e os objetos atualizados de acordo com o dano recebido.</li></ul><h2 class="subheading details-toggle-control details-toggle" data-details-id="ch:aplicaDanos0"><code><a href="Labs2025.html#t:Terreno" title="Labs2025">Terreno</a></code>:</h2><details id="ch:aplicaDanos0"><summary class="hide-when-js-enabled">Expand</summary><ul><li>Atualiza o <code><a href="Labs2025.html#t:Mapa" title="Labs2025">Mapa</a></code> do <code><a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a></code>, destruindo os terrenos destrut&#237;veis nas posi&#231;&#245;es afetadas</li><li>Se o terreno na posi&#231;&#227;o afetada for destrut&#237;vel, destr&#243;i-o (substitui por <code><a href="Labs2025.html#v:Ar" title="Labs2025">Ar</a></code>)</li><li>Caso contr&#225;rio, mant&#233;m o terreno como est&#225;</li></ul></details><h2 class="subheading details-toggle-control details-toggle" data-details-id="ch:aplicaDanos1"><code><a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></code>:</h2><details id="ch:aplicaDanos1"><summary class="hide-when-js-enabled">Expand</summary><ul><li>Atualiza cada <code><a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></code> na lista de <code>Minhocas</code> do <code><a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a></code>, aplicando o dano correspondente se a <code><a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></code> estiver na posi&#231;&#227;o afetada</li><li>Se a <code><a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></code> estiver na posi&#231;&#227;o afetada, reduz a sua <code>Vida</code> pelo valor do dano</li><li>Se a <code>Vida</code> da <code><a href="Labs2025.html#t:Minhoca" title="Labs2025">Minhoca</a></code> for menor ou igual a zero, define a <code>Vida</code> como <code><a href="Labs2025.html#v:Morta" title="Labs2025">Morta</a></code></li></ul></details><h2 class="subheading details-toggle-control details-toggle" data-details-id="ch:aplicaDanos2"><code><a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a></code>:</h2><details id="ch:aplicaDanos2"><summary class="hide-when-js-enabled">Expand</summary><ul><li>Atualiza cada <code><a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a></code> na lista de objetos do <code><a href="Labs2025.html#t:Estado" title="Labs2025">Estado</a></code></li><li>Se o <code><a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a></code> for um <code><a href="Labs2025.html#v:Barril" title="Labs2025">Barril</a></code> n&#227;o explodido e estiver na posi&#231;&#227;o afetada, marca-o como explodido</li><li>Caso contr&#225;rio, mant&#233;m o <code><a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a></code> como est&#225;</li><li>Se o <code><a href="Labs2025.html#t:Objeto" title="Labs2025">Objeto</a></code> for um <code><a href="Labs2025.html#v:Disparo" title="Labs2025">Disparo</a></code>, mant&#233;m-no como est&#225;</li></ul></details></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>